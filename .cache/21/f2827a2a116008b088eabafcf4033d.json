{"id":"../../node_modules/multer/storage/disk.js","dependencies":[{"name":"C:\\Users\\Dell\\Downloads\\4-natours\\package.json","includedInParent":true,"mtime":1738438436952},{"name":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\multer\\package.json","includedInParent":true,"mtime":1737809511798},{"name":"fs","loc":{"line":1,"column":17,"index":17},"parent":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\multer\\storage\\disk.js","resolved":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\parcel-bundler\\src\\builtins\\_empty.js"},{"name":"os","loc":{"line":2,"column":17,"index":40},"parent":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\multer\\storage\\disk.js","resolved":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\os-browserify\\browser.js"},{"name":"path","loc":{"line":3,"column":19,"index":65},"parent":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\multer\\storage\\disk.js","resolved":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\path-browserify\\index.js"},{"name":"crypto","loc":{"line":4,"column":21,"index":94},"parent":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\multer\\storage\\disk.js","resolved":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\crypto-browserify\\index.js"},{"name":"mkdirp","loc":{"line":5,"column":21,"index":125},"parent":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\multer\\storage\\disk.js","resolved":"C:\\Users\\Dell\\Downloads\\4-natours\\node_modules\\mkdirp\\index.js"}],"generated":{"js":"var fs = require('fs');\nvar os = require('os');\nvar path = require('path');\nvar crypto = require('crypto');\nvar mkdirp = require('mkdirp');\nfunction getFilename(req, file, cb) {\n  crypto.randomBytes(16, function (err, raw) {\n    cb(err, err ? undefined : raw.toString('hex'));\n  });\n}\nfunction getDestination(req, file, cb) {\n  cb(null, os.tmpdir());\n}\nfunction DiskStorage(opts) {\n  this.getFilename = opts.filename || getFilename;\n  if (typeof opts.destination === 'string') {\n    mkdirp.sync(opts.destination);\n    this.getDestination = function ($0, $1, cb) {\n      cb(null, opts.destination);\n    };\n  } else {\n    this.getDestination = opts.destination || getDestination;\n  }\n}\nDiskStorage.prototype._handleFile = function _handleFile(req, file, cb) {\n  var that = this;\n  that.getDestination(req, file, function (err, destination) {\n    if (err) return cb(err);\n    that.getFilename(req, file, function (err, filename) {\n      if (err) return cb(err);\n      var finalPath = path.join(destination, filename);\n      var outStream = fs.createWriteStream(finalPath);\n      file.stream.pipe(outStream);\n      outStream.on('error', cb);\n      outStream.on('finish', function () {\n        cb(null, {\n          destination: destination,\n          filename: filename,\n          path: finalPath,\n          size: outStream.bytesWritten\n        });\n      });\n    });\n  });\n};\nDiskStorage.prototype._removeFile = function _removeFile(req, file, cb) {\n  var path = file.path;\n  delete file.destination;\n  delete file.filename;\n  delete file.path;\n  fs.unlink(path, cb);\n};\nmodule.exports = function (opts) {\n  return new DiskStorage(opts);\n};"},"sourceMaps":null,"error":null,"hash":"385b2e866448f5e59c646aab9eddd904","cacheData":{"env":{}}}